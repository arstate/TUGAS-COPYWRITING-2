<div class="relative w-full h-full flex flex-col items-center justify-center text-center text-white animate-fade-in">
  @switch (slide().type) {
    @case ('title') {
      <h1 class="py-4 text-6xl md:text-7xl lg:text-8xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-400 drop-shadow-lg animate-font-change">
        {{ slide().title }}
      </h1>
      @if (slide().subtitle; as subtitle) {
        <p class="mt-4 text-lg md:text-xl text-gray-300 tracking-wider whitespace-nowrap">
          {{ subtitle }}
        </p>
      }
    }
    @case ('question') {
      <div class="w-full max-w-4xl">
        <h2 class="text-2xl font-semibold text-orange-400 mb-6">{{ slide().title }}</h2>
        <p class="text-3xl md:text-4xl leading-tight font-medium text-gray-100">
          {{ slide().content }}
        </p>
      </div>
    }
    @case ('answer') {
      <div class="w-full max-w-4xl text-left">
        <h2 class="text-2xl font-semibold text-orange-400 mb-6">{{ slide().title }}</h2>
        @if (isArray(slide().content)) {
          <div class="space-y-6 text-xl md:text-2xl text-gray-200 leading-relaxed">
            @for (paragraph of slide().content; track paragraph) {
              <p>{{ paragraph }}</p>
            }
          </div>
        } @else {
          <p class="text-xl md:text-2xl text-gray-200 leading-relaxed">{{ slide().content }}</p>
        }
      </div>
    }
    @case ('image') {
      <div class="w-full h-full flex flex-col items-center justify-center p-4">
        <h2 class="flex-shrink-0 text-xl font-semibold text-orange-400 mb-4">{{ slide().title }}</h2>
        <div class="w-full flex-grow flex items-center justify-center min-h-0">
            <img [src]="slide().imageSrc" alt="Perbedaan Copywriter dan Content Writer" class="max-w-full max-h-full object-contain rounded-lg shadow-lg" />
        </div>
      </div>
    }
    @case ('table') {
      <div class="w-full max-w-6xl mx-auto">
        <h2 class="text-2xl font-semibold text-orange-400 mb-8">{{ slide().title }}</h2>
        <div class="bg-gray-500/10 backdrop-blur-lg border border-white/20 rounded-2xl shadow-xl overflow-hidden">
          <div class="grid grid-cols-[auto_1fr_1fr] md:grid-cols-[1fr_2fr_2fr] text-left text-sm md:text-base">
            <!-- Headers -->
            @if(slide().tableHeaders; as headers) {
              @for(header of headers; track header; let isLast = $last) {
                <div class="p-4 font-bold text-orange-400 border-b border-white/10" [class.border-r]="!isLast" [class.border-white/10]="!isLast">
                  {{ header }}
                </div>
              }
            }
            
            <!-- Body -->
            @if(slide().tableRows; as rows) {
              @for (row of rows; track row; let isLastRow = $last) {
                @for(cell of row; track cell; let isLastCell = $last; let i = $index) {
                  <div 
                    class="p-4 leading-relaxed"
                    [class.border-r]="!isLastCell"
                    [class.border-b]="!isLastRow"
                    [class.border-white/10]="true"
                    [class.font-semibold]="i === 0"
                    [class.text-white]="i === 0"
                    [class.text-gray-300]="i > 0">
                    {{ cell }}
                  </div>
                }
              }
            }
          </div>
        </div>
      </div>
    }
    @case ('mindmap') {
      <div class="w-full h-full flex flex-col items-center justify-start">
        <h2 class="flex-shrink-0 text-2xl font-semibold text-orange-400 mb-8">{{ slide().title }}</h2>
        @if(slide().mindmap; as mindmap) {
          <div class="relative flex-grow flex items-center justify-center w-full">
            <div class="relative w-0 h-0 flex items-center justify-center transition-transform duration-500 scale-[0.6] sm:scale-[0.7] md:scale-[0.85] lg:scale-100">
              <div class="absolute w-[30rem] h-[30rem] border-2 border-dashed border-orange-500/30 rounded-full animate-spin-slow"></div>
              <div class="absolute w-[38rem] h-[38rem] border-2 border-dashed border-red-500/20 rounded-full animate-spin-slow-reverse"></div>
              
              <div class="z-10 bg-orange-500/20 backdrop-blur-md border border-orange-400/60 text-white font-bold text-xl p-4 rounded-[50%] w-64 aspect-square flex items-center justify-center text-center shadow-lg shadow-orange-500/30">
                {{ mindmap.center }}
              </div>
              
              @for(branch of mindmap.branches; track branch; let i = $index) {
                <div class="absolute z-10 p-4 bg-gray-800/60 backdrop-blur-sm rounded-xl shadow-lg border border-white/10 w-60 text-left animate-branch-in branch-item"
                     [style]="getBranchStyle(i)"
                     [style.animation-delay]="getBranchAnimationDelay(i)['animation-delay']">
                  <h3 class="font-bold text-orange-400 text-base mb-1">{{ branch.title }}</h3>
                  <p class="text-sm text-gray-300">{{ branch.text }}</p>
                </div>
              }
            </div>
          </div>
        }
      </div>
    }
     @case ('final') {
      <div class="flex flex-col items-center justify-center">
        <h1 class="py-4 text-6xl md:text-7xl lg:text-8xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-orange-400 drop-shadow-lg animate-font-change">
          {{ slide().title }}
        </h1>
      </div>
    }
  }
</div>
<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.98); }
    to { opacity: 1; transform: scale(1); }
  }
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out forwards;
  }
  @keyframes spin-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  .animate-spin-slow {
    animation: spin-slow 40s linear infinite;
  }
  .animate-spin-slow-reverse {
    animation: spin-slow 50s linear infinite reverse;
  }
  @keyframes font-shifter {
    0% { font-family: 'Impact', 'Arial Black', sans-serif; }
    5% { font-family: 'Courier New', monospace; }
    10% { font-family: 'Georgia', serif; }
    15% { font-family: 'Verdana', sans-serif; }
    20% { font-family: 'Garamond', serif; }
    25% { font-family: 'Brush Script MT', cursive; }
    30% { font-family: 'Rockwell', serif; }
    35% { font-family: 'Lucida Console', monospace; }
    40% { font-family: 'Palatino', 'Book Antiqua', serif; }
    45% { font-family: 'Tahoma', sans-serif; }
    50% { font-family: 'Trebuchet MS', sans-serif; }
    55% { font-family: 'Baskerville', serif; }
    60% { font-family: 'Futura', sans-serif; }
    65% { font-family: 'Didot', serif; }
    70% { font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; }
    75% { font-family: 'Gill Sans', 'Gill Sans MT', Calibri, sans-serif; }
    80% { font-family: 'Candara', sans-serif; }
    85% { font-family: 'Optima', sans-serif; }
    90% { font-family: 'Perpetua', serif; }
    95% { font-family: 'Arial Narrow', sans-serif; }
    100% { font-family: 'Impact', 'Arial Black', sans-serif; }
  }
  .animate-font-change {
    animation: font-shifter 10s linear infinite;
  }
  @keyframes branch-in {
    from { 
      opacity: 0; 
      transform: translate(0, 0) scale(0.5);
    }
    to { 
      opacity: 1; 
      transform: translate(var(--translateX), var(--translateY)) scale(1);
    }
  }
  .animate-branch-in {
    animation: branch-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    opacity: 0; /* Mulai tidak terlihat sebelum animasi */
  }

  /* --- Styles for connecting lines --- */
  .branch-item::before {
    content: '';
    position: absolute;
    z-index: -1;
    bottom: 50%;
    left: 50%;
    width: 3px; /* Slightly thicker line */
    
    /* Animated flame gradient */
    background: linear-gradient(
      180deg, /* Aligns with transform-origin */
      transparent 0%,
      rgba(255, 170, 0, 0.2) 15%,
      rgba(249, 115, 22, 0.9) 50%,
      rgba(255, 80, 30, 0.8) 85%,
      rgba(249, 115, 22, 0.9) 95%,
      rgba(255, 170, 0, 0.5) 100%
    );
    background-size: 100% 300%; /* Much taller than the element to allow vertical movement */

    filter: blur(2.5px);
    transform-origin: bottom center;
    transform: translateX(-50%) rotate(var(--rotation));
    
    /* Initial state for animation */
    height: 0;
    opacity: 0;

    /* Chained animations: grow first, then flame infinitely */
    animation: 
      line-grow 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards,
      flame 2s ease-in-out infinite alternate;
      
    animation-delay: inherit; /* Inherit staggered delay from parent element */
  }
  
  @keyframes line-grow {
    to { 
      height: var(--line-length);
      opacity: 0.9;
    }
  }

  @keyframes flame {
    from {
      background-position: 0% 100%;
      filter: blur(2px) brightness(1.1);
    }
    to {
      background-position: 0% 0%;
      filter: blur(3.5px) brightness(1.3);
    }
  }
</style>